<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Novis AI Core - Executive Dashboard</title>
  <style>
    :root {
      --primary: #1E3A8A;
      --secondary: #0EA5E9;
      --success: #10B981;
      --warning: #F59E0B;
      --danger: #EF4444;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; background: #f8fafc; color: #1f2937; }
    .header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .container { max-width: 1400px; margin: 2rem auto; padding: 0 1.5rem; }
    .card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin: 1rem 0; }
    .kpi { display: inline-block; width: 22%; margin: 1%; text-align: center; padding: 1.5rem; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .kpi-value { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 0.5rem 0; }
    .btn { background: var(--primary); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; margin: 0.5rem; font-weight: 600; }
    .btn:hover { background: var(--secondary); }
    .error { color: var(--danger); padding: 1rem; background: #FEE2E2; border-radius: 8px; margin: 1rem 0; }
    .success { color: var(--success); padding: 1rem; background: #D1FAE5; border-radius: 8px; margin: 1rem 0; }
  </style>

  <!-- Configuración global (copia desde config.example.js a config.prod.js) -->
  <script src="config.prod.js"></script>
  <!-- Lógica principal del dashboard -->
  <script defer src="main.js"></script>
</head>
<body>
  <div class="header">
    <h1>NOVIS AI CORE - Executive Dashboard</h1>
    <p>Business Intelligence Real-Time</p>
  </div>

  <!-- Health & Status Section -->
  <div id="health-status" class="health-section"
       style="background: #f0f8f0; border-left: 4px solid #10b981; padding: 12px 16px; margin-bottom: 24px; border-radius: 4px; font-size: 13px; color: #333;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <span id="health-indicator"
              style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background: #10b981; margin-right: 8px;"></span>
        <span id="health-text">Sistema saludable</span>
      </div>
      <div style="text-align: right;">
        <div id="last-update" style="color: #666; margin-bottom: 4px;">Última actualización: nunca</div>
        <div id="latency-info" style="color: #999; font-size: 12px;">
          Latencia: -- ms | Modo:
          <span style="display: inline-block; padding: 2px 6px; background: #dbeafe; color: #0c4a6e; border-radius: 3px; font-weight: bold; font-size: 11px;">DEMO</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>KPI Dashboard</h2>

    <div>
      <div class="kpi">
        <h3>Total Executions</h3>
        <div class="kpi-value" id="executions">-</div>
        <p>Last 24 Hours</p>
      </div>

      <div class="kpi">
        <h3>Time Saved</h3>
        <div class="kpi-value" id="timeSaved">-</div>
        <p>Hours (Month)</p>
      </div>

      <div class="kpi">
        <h3>Cost Savings</h3>
        <div class="kpi-value" id="costSavings">-</div>
        <p>USD Monthly</p>
      </div>

      <div class="kpi">
        <h3>ROI %</h3>
        <div class="kpi-value" id="roi">-</div>
        <p>Return on Investment</p>
      </div>
    </div>

    <div class="card">
      <h2>Top Workflows</h2>
      <table id="workflowTable" style="width:100%; border-collapse: collapse; margin-top: 1rem;">
        <thead style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
          <tr>
            <th style="padding: 1rem; text-align: left;">Workflow Name</th>
            <th style="padding: 1rem; text-align: left;">Executions</th>
            <th style="padding: 1rem; text-align: left;">Avg Time (ms)</th>
          </tr>
        </thead>
        <tbody id="workflowBody"></tbody>
      </table>
    </div>

    <div class="card">
      <h3>System Status</h3>
      <p id="status">Loading...</p>
      <p id="lastUpdate">-</p>
    </div>

    <div>
      <button id="refresh-btn" class="btn">Refresh Dashboard</button>
      <button id="demo-btn" class="btn">Enable Demo Mode</button>
    </div>

    <div id="message"></div>
  </div>
</body>
</html>
